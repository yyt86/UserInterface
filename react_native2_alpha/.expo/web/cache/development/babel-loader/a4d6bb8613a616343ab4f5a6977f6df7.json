{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"F:\\\\course\\\\639-UI\\\\react_native2_alpha-yyt86-main\\\\MealsView.js\";\n\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } it = o[Symbol.iterator](); return it.next.bind(it); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport moment from \"moment\";\nimport { Modal, Portal, Title, Provider, FAB } from 'react-native-paper';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Icon from \"@expo/vector-icons/FontAwesome5\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport AsyncStorage from '@react-native-community/async-storage';\nimport ActivityCard from \"./ActivityCard\";\nimport ActivityModal from \"./ActivityModal\";\nimport AddActivity from \"./AddActivity\";\nimport { useIsFocused } from '@react-navigation/native';\n\nvar MealView = function (_React$Component) {\n  _inherits(MealView, _React$Component);\n\n  var _super = _createSuper(MealView);\n\n  function MealView(props) {\n    var _this;\n\n    _classCallCheck(this, MealView);\n\n    _this = _super.call(this, props);\n\n    _this.hideModal = function () {\n      return _this.setState({\n        visible: false\n      });\n    };\n\n    _this.state = {\n      name: \"\",\n      duration: 0.0,\n      date: \"\",\n      calories: 0.0,\n      mealArray: [],\n      accessToken: \"\",\n      username: \"\",\n      visible: false\n    };\n    return _this;\n  }\n\n  _createClass(MealView, [{\n    key: \"getStoredData\",\n    value: function getStoredData(key) {\n      var value;\n      return _regeneratorRuntime.async(function getStoredData$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem(key));\n\n            case 3:\n              value = _context.sent;\n              this.setState(_defineProperty({}, key, value));\n              _context.next = 10;\n              break;\n\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0);\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this, [[0, 7]], Promise);\n    }\n  }, {\n    key: \"deleteMeal\",\n    value: function deleteMeal(id) {\n      fetch('https://mysqlcs639.cs.wisc.edu/meals/' + id, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json',\n          'x-access-token': this.state.accessToken\n        }\n      }).then(function (res) {\n        return res.json();\n      }).then(function (res) {\n        alert(\"Mealhas been deleted!\");\n      }).catch(function (err) {\n        alert(\"Something went wrong! \");\n      });\n      this.updateData();\n    }\n  }, {\n    key: \"handleAddActivity\",\n    value: function handleAddActivity() {\n      this.setState({\n        visible: true\n      });\n    }\n  }, {\n    key: \"getModal\",\n    value: function getModal() {\n      var _this2 = this;\n\n      if (this.state.visible) {\n        return React.createElement(AddActivity, {\n          visible: this.state.visible,\n          updateData: function updateData() {\n            return _this2.updateData();\n          },\n          hideModal: this.hideModal,\n          accessToken: this.state.accessToken,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 15\n          }\n        });\n      }\n    }\n  }, {\n    key: \"updateData\",\n    value: function updateData() {\n      var _this3 = this;\n\n      var tempMeals = [];\n      fetch('https://mysqlcs639.cs.wisc.edu/meals/', {\n        method: 'GET',\n        headers: {\n          'x-access-token': this.state.accessToken\n        }\n      }).then(function (res) {\n        return res.json();\n      }).then(function (res) {\n        console.log(res, \"res\");\n        tempMeals = res.meals;\n\n        for (var _iterator = _createForOfIteratorHelperLoose(res.meals.values()), _step; !(_step = _iterator()).done;) {\n          var meal = _step.value;\n          fetch('https://mysqlcs639.cs.wisc.edu/meals/' + meal.id + '/foods', {\n            method: 'GET',\n            headers: {\n              'x-access-token': _this3.state.accessToken\n            }\n          }).then(function (res2) {\n            return res2.json();\n          }).then(function (res2) {\n            for (var _iterator2 = _createForOfIteratorHelperLoose(res2.foods.values()), _step2; !(_step2 = _iterator2()).done;) {\n              var food = _step2.value;\n              todayProteins += food.protein;\n              todayCarbo += food.carbohydrates;\n              todayFats += food.fat;\n              todayFoodCal = food.calories;\n            }\n\n            _this3.setState({\n              dailyProtein: todayProteins\n            });\n\n            _this3.setState({\n              dailyCarbo: todayCarbo\n            });\n\n            _this3.setState({\n              dailyFats: todayFats\n            });\n\n            _this3.setState({\n              dailyFoodCal: todayFoodCal\n            });\n          });\n        }\n      }).catch(function (err) {\n        console.log(err);\n      });\n    }\n  }, {\n    key: \"getMeals\",\n    value: function getMeals() {\n      var _this4 = this;\n\n      var cardList = [];\n\n      for (var i = 0; i < this.state.mealArray.length; i++) {\n        var value = this.state.activityArray[i];\n        cardList.push(React.createElement(ActivityCard, {\n          key: i,\n          name: value.name,\n          date: value.date,\n          duration: value.duration,\n          calories: value.calories,\n          id: value.id,\n          accessToken: this.state.accessToken,\n          deleteExercise: function deleteExercise(id) {\n            return _this4.deleteExercise(id);\n          },\n          updateData: function updateData() {\n            return _this4.updateData();\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 27\n          }\n        }));\n      }\n\n      return cardList;\n    }\n  }, {\n    key: \"empty\",\n    value: function empty() {}\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this5 = this;\n\n      return _regeneratorRuntime.async(function componentDidMount$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _regeneratorRuntime.awrap(this.getStoredData(\"accessToken\"));\n\n            case 2:\n              _context2.next = 4;\n              return _regeneratorRuntime.awrap(this.getStoredData(\"username\"));\n\n            case 4:\n              this.updateData();\n              this.navListener = this.props.navigation.addListener('didFocus', function () {\n                _this5.updateData();\n              });\n\n            case 6:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.navListener();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this6 = this;\n\n      return React.createElement(ScrollView, {\n        style: styles.mainContainer,\n        contentContainerStyle: {\n          flexGrow: 11,\n          justifyContent: 'center',\n          alignItems: \"center\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 9\n        }\n      }, React.createElement(View, {\n        style: styles.space,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 13\n        }\n      }), React.createElement(View, {\n        style: {\n          flexDirection: 'row',\n          flexWrap: 'wrap'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 13\n        }\n      }, React.createElement(Icon, {\n        name: \"walking\",\n        size: 40,\n        color: \"#900\",\n        style: {\n          marginRight: 20\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 13\n        }\n      }), React.createElement(Text, {\n        style: styles.bigText,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 11\n        }\n      }, \"Exercises\")), React.createElement(View, {\n        style: styles.spaceSmall,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 13\n        }\n      }), React.createElement(Text, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 9\n        }\n      }, \"Let's get to work!\"), React.createElement(Text, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 9\n        }\n      }, \"Record your exercises below.\"), React.createElement(FAB, {\n        icon: \"plus\",\n        medium: true,\n        style: styles.fab,\n        onPress: function onPress() {\n          return _this6.handleAddActivity();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 9\n        }\n      }));\n    }\n  }]);\n\n  return MealView;\n}(React.Component);\n\nvar styles = StyleSheet.create({\n  scrollView: {\n    height: Dimensions.get('window').height\n  },\n  mainContainer: {\n    flex: 1\n  },\n  scrollViewContainer: {},\n  container: {\n    flex: 1,\n    backgroundColor: '#fff'\n  },\n  bigText: {\n    fontSize: 32,\n    fontWeight: \"700\",\n    marginBottom: 5\n  },\n  spaceSmall: {\n    width: 20,\n    height: 10\n  },\n  space: {\n    width: 20,\n    height: 20\n  },\n  buttonInline: {\n    display: \"flex\"\n  },\n  fab: {\n    alignSelf: 'flex-end',\n    position: 'absolute',\n    top: 55,\n    right: 15,\n    backgroundColor: '#900'\n  }\n});\nexport default MealView;","map":{"version":3,"sources":["F:/course/639-UI/react_native2_alpha-yyt86-main/MealsView.js"],"names":["React","moment","Modal","Portal","Title","Provider","FAB","Icon","AsyncStorage","ActivityCard","ActivityModal","AddActivity","useIsFocused","MealView","props","hideModal","setState","visible","state","name","duration","date","calories","mealArray","accessToken","username","key","getItem","value","console","log","id","fetch","method","headers","then","res","json","alert","catch","err","updateData","tempMeals","meals","values","meal","res2","foods","food","todayProteins","protein","todayCarbo","carbohydrates","todayFats","fat","todayFoodCal","dailyProtein","dailyCarbo","dailyFats","dailyFoodCal","cardList","i","length","activityArray","push","deleteExercise","getStoredData","navListener","navigation","addListener","styles","mainContainer","flexGrow","justifyContent","alignItems","space","flexDirection","flexWrap","marginRight","bigText","spaceSmall","fab","handleAddActivity","Component","StyleSheet","create","scrollView","height","Dimensions","get","flex","scrollViewContainer","container","backgroundColor","fontSize","fontWeight","marginBottom","width","buttonInline","display","alignSelf","position","top","right"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,SAASC,KAAT,EAAgBC,MAAhB,EAAwBC,KAAxB,EAA+BC,QAA/B,EAAyCC,GAAzC,QAAoD,oBAApD;;;;;;;AAEA,OAAOC,IAAP;;AAEA,OAAOC,YAAP,MAAyB,uCAAzB;AACA,OAAOC,YAAP;AACA,OAAOC,aAAP;AACA,OAAOC,WAAP;AACA,SAASC,YAAT,QAA6B,0BAA7B;;IAKMC,Q;;;;;AACF,oBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACf,8BAAMA,KAAN;;AADe,UA4CnBC,SA5CmB,GA4CP;AAAA,aAAM,MAAKC,QAAL,CAAc;AAACC,QAAAA,OAAO,EAAE;AAAV,OAAd,CAAN;AAAA,KA5CO;;AAEf,UAAKC,KAAL,GAAa;AACTC,MAAAA,IAAI,EAAE,EADG;AAETC,MAAAA,QAAQ,EAAE,GAFD;AAGTC,MAAAA,IAAI,EAAE,EAHG;AAITC,MAAAA,QAAQ,EAAE,GAJD;AAKTC,MAAAA,SAAS,EAAE,EALF;AAMTC,MAAAA,WAAW,EAAE,EANJ;AAOTC,MAAAA,QAAQ,EAAE,EAPD;AAQTR,MAAAA,OAAO,EAAE;AARA,KAAb;AAFe;AAalB;;;;kCAEmBS,G;;;;;;;;+CAEMlB,YAAY,CAACmB,OAAb,CAAqBD,GAArB,C;;;AAAdE,cAAAA,K;AACJ,mBAAKZ,QAAL,qBAAgBU,GAAhB,EAAsBE,KAAtB;;;;;;;AAEAC,cAAAA,OAAO,CAACC,GAAR;;;;;;;;;;;+BAIGC,E,EAAG;AACVC,MAAAA,KAAK,CAAC,0CAA0CD,EAA3C,EAA+C;AAClDE,QAAAA,MAAM,EAAE,QAD0C;AAElDC,QAAAA,OAAO,EAAE;AACP,0BAAgB,kBADT;AAEP,4BAAkB,KAAKhB,KAAL,CAAWM;AAFtB;AAFyC,OAA/C,CAAL,CAOGW,IAPH,CAOQ,UAAAC,GAAG;AAAA,eAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,OAPX,EAQGF,IARH,CAQQ,UAAAC,GAAG,EAAI;AACXE,QAAAA,KAAK,CAAC,uBAAD,CAAL;AAED,OAXH,EAYGC,KAZH,CAYS,UAAAC,GAAG,EAAI;AACZF,QAAAA,KAAK,CAAC,wBAAD,CAAL;AACD,OAdH;AAeE,WAAKG,UAAL;AAEL;;;wCAGkB;AACf,WAAKzB,QAAL,CAAc;AAACC,QAAAA,OAAO,EAAE;AAAV,OAAd;AAKH;;;+BAES;AAAA;;AACR,UAAG,KAAKC,KAAL,CAAWD,OAAd,EAAsB;AAClB,eACI,oBAAC,WAAD;AAAa,UAAA,OAAO,EAAE,KAAKC,KAAL,CAAWD,OAAjC;AAA0C,UAAA,UAAU,EAAI;AAAA,mBAAK,MAAI,CAACwB,UAAL,EAAL;AAAA,WAAxD;AAAiF,UAAA,SAAS,EAAE,KAAK1B,SAAjG;AAA4G,UAAA,WAAW,EAAE,KAAKG,KAAL,CAAWM,WAApI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;AAGH;AACJ;;;iCAEa;AAAA;;AACV,UAAIkB,SAAS,GAAG,EAAhB;AACEV,MAAAA,KAAK,CAAC,uCAAD,EAA0C;AAC7CC,QAAAA,MAAM,EAAE,KADqC;AAE7CC,QAAAA,OAAO,EAAE;AAAE,4BAAkB,KAAKhB,KAAL,CAAWM;AAA/B;AAFoC,OAA1C,CAAL,CAIGW,IAJH,CAIQ,UAAAC,GAAG;AAAA,eAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,OAJX,EAKGF,IALH,CAKQ,UAAAC,GAAG,EAAI;AACXP,QAAAA,OAAO,CAACC,GAAR,CAAYM,GAAZ,EAAiB,KAAjB;AAEEM,QAAAA,SAAS,GAAGN,GAAG,CAACO,KAAhB;;AACC,6DAAkBP,GAAG,CAACO,KAAJ,CAAUC,MAAV,EAAlB,wCAAqC;AAAA,cAA3BC,IAA2B;AAClCb,UAAAA,KAAK,CAAC,0CAA0Ca,IAAI,CAACd,EAA/C,GAAoD,QAArD,EAA+D;AAC9DE,YAAAA,MAAM,EAAE,KADsD;AAE7DC,YAAAA,OAAO,EAAE;AAAE,gCAAkB,MAAI,CAAChB,KAAL,CAAWM;AAA/B;AAFoD,WAA/D,CAAL,CAIGW,IAJH,CAIQ,UAAAW,IAAI;AAAA,mBAAIA,IAAI,CAACT,IAAL,EAAJ;AAAA,WAJZ,EAKGF,IALH,CAKQ,UAAAW,IAAI,EAAI;AAEV,kEAAkBA,IAAI,CAACC,KAAL,CAAWH,MAAX,EAAlB,2CAAsC;AAAA,kBAA5BI,IAA4B;AAClCC,cAAAA,aAAa,IAAID,IAAI,CAACE,OAAtB;AACAC,cAAAA,UAAU,IAAIH,IAAI,CAACI,aAAnB;AACAC,cAAAA,SAAS,IAAIL,IAAI,CAACM,GAAlB;AACAC,cAAAA,YAAY,GAAGP,IAAI,CAAC1B,QAApB;AACH;;AACH,YAAA,MAAI,CAACN,QAAL,CAAc;AAACwC,cAAAA,YAAY,EAAEP;AAAf,aAAd;;AACA,YAAA,MAAI,CAACjC,QAAL,CAAc;AAACyC,cAAAA,UAAU,EAAEN;AAAb,aAAd;;AACA,YAAA,MAAI,CAACnC,QAAL,CAAc;AAAC0C,cAAAA,SAAS,EAAEL;AAAZ,aAAd;;AACA,YAAA,MAAI,CAACrC,QAAL,CAAc;AAAC2C,cAAAA,YAAY,EAAEJ;AAAf,aAAd;AACD,WAjBH;AAkBG;AAEJ,OA9BT,EA+BGhB,KA/BH,CA+BS,UAAAC,GAAG,EAAG;AAACX,QAAAA,OAAO,CAACC,GAAR,CAAYU,GAAZ;AAAiB,OA/BjC;AAgCH;;;+BAES;AAAA;;AAEN,UAAIoB,QAAQ,GAAG,EAAf;;AAEA,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK3C,KAAL,CAAWK,SAAX,CAAqBuC,MAAzC,EAAiDD,CAAC,EAAlD,EAAqD;AAEnD,YAAIjC,KAAK,GAAG,KAAKV,KAAL,CAAW6C,aAAX,CAAyBF,CAAzB,CAAZ;AAIED,QAAAA,QAAQ,CAACI,IAAT,CAAc,oBAAC,YAAD;AAAc,UAAA,GAAG,EAAEH,CAAnB;AAAsB,UAAA,IAAI,EAAEjC,KAAK,CAACT,IAAlC;AAAwC,UAAA,IAAI,EAAES,KAAK,CAACP,IAApD;AACC,UAAA,QAAQ,EAAEO,KAAK,CAACR,QADjB;AAC2B,UAAA,QAAQ,EAAEQ,KAAK,CAACN,QAD3C;AAEC,UAAA,EAAE,EAAEM,KAAK,CAACG,EAFX;AAEe,UAAA,WAAW,EAAE,KAAKb,KAAL,CAAWM,WAFvC;AAGC,UAAA,cAAc,EAAI,wBAACO,EAAD;AAAA,mBAAM,MAAI,CAACkC,cAAL,CAAoBlC,EAApB,CAAN;AAAA,WAHnB;AAIA,UAAA,UAAU,EAAI;AAAA,mBAAK,MAAI,CAACU,UAAL,EAAL;AAAA,WAJd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAd;AAMH;;AACD,aAAOmB,QAAP;AACH;;;4BACM,CAAE;;;;;;;;;;;+CAGC,KAAKM,aAAL,CAAmB,aAAnB,C;;;;+CACA,KAAKA,aAAL,CAAmB,UAAnB,C;;;AAGN,mBAAKzB,UAAL;AAEA,mBAAK0B,WAAL,GAAmB,KAAKrD,KAAL,CAAWsD,UAAX,CAAsBC,WAAtB,CAAkC,UAAlC,EAA8C,YAAM;AACrE,gBAAA,MAAI,CAAC5B,UAAL;AAEF,eAHmB,CAAnB;;;;;;;;;;;2CASmB;AAErB,WAAK0B,WAAL;AACF;;;6BAGS;AAAA;;AAEL,aACA,oBAAC,UAAD;AAAY,QAAA,KAAK,EAAEG,MAAM,CAACC,aAA1B;AAAyC,QAAA,qBAAqB,EAAE;AAAEC,UAAAA,QAAQ,EAAE,EAAZ;AAAgBC,UAAAA,cAAc,EAAE,QAAhC;AAA0CC,UAAAA,UAAU,EAAE;AAAtD,SAAhE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAEJ,MAAM,CAACK,KAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,EAEI,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAE;AAAEC,UAAAA,aAAa,EAAE,KAAjB;AAAwBC,UAAAA,QAAQ,EAAE;AAAlC,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA,oBAAC,IAAD;AAAM,QAAA,IAAI,EAAC,SAAX;AAAqB,QAAA,IAAI,EAAE,EAA3B;AAA+B,QAAA,KAAK,EAAC,MAArC;AAA4C,QAAA,KAAK,EAAE;AAAEC,UAAAA,WAAW,EAAE;AAAf,SAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADA,EAEF,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAER,MAAM,CAACS,OAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAFE,CAFJ,EAMI,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAET,MAAM,CAACU,UAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QANJ,EAOA,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAPA,EAQA,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wCARA,EAYA,oBAAC,GAAD;AACO,QAAA,IAAI,EAAC,MADZ;AAEO,QAAA,MAAM,MAFb;AAIO,QAAA,KAAK,EAAEV,MAAM,CAACW,GAJrB;AAKO,QAAA,OAAO,EAAE;AAAA,iBAAM,MAAI,CAACC,iBAAL,EAAN;AAAA,SALhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAZA,CADA;AA+BH;;;;EA9KkBlF,KAAK,CAACmF,S;;AAiL7B,IAAMb,MAAM,GAAGc,UAAU,CAACC,MAAX,CAAkB;AAC7BC,EAAAA,UAAU,EAAE;AACRC,IAAAA,MAAM,EAAEC,UAAU,CAACC,GAAX,CAAe,QAAf,EAAyBF;AADzB,GADiB;AAI3BhB,EAAAA,aAAa,EAAE;AACbmB,IAAAA,IAAI,EAAE;AADO,GAJY;AAO3BC,EAAAA,mBAAmB,EAAE,EAPM;AAQ3BC,EAAAA,SAAS,EAAE;AACTF,IAAAA,IAAI,EAAE,CADG;AAETG,IAAAA,eAAe,EAAE;AAFR,GARgB;AAY3Bd,EAAAA,OAAO,EAAE;AACPe,IAAAA,QAAQ,EAAE,EADH;AAEPC,IAAAA,UAAU,EAAE,KAFL;AAGPC,IAAAA,YAAY,EAAE;AAHP,GAZkB;AAiB3BhB,EAAAA,UAAU,EAAE;AACViB,IAAAA,KAAK,EAAE,EADG;AAEVV,IAAAA,MAAM,EAAE;AAFE,GAjBe;AAqB3BZ,EAAAA,KAAK,EAAE;AACLsB,IAAAA,KAAK,EAAE,EADF;AAELV,IAAAA,MAAM,EAAE;AAFH,GArBoB;AAyB3BW,EAAAA,YAAY,EAAE;AACZC,IAAAA,OAAO,EAAE;AADG,GAzBa;AA6B3BlB,EAAAA,GAAG,EAAE;AACHmB,IAAAA,SAAS,EAAE,UADR;AAEHC,IAAAA,QAAQ,EAAE,UAFP;AAGHC,IAAAA,GAAG,EAAE,EAHF;AAIHC,IAAAA,KAAK,EAAE,EAJJ;AAKHV,IAAAA,eAAe,EAAE;AALd;AA7BsB,CAAlB,CAAf;AAuCA,eAAehF,QAAf","sourcesContent":["import React from 'react';\r\nimport moment from \"moment\";\r\nimport { Modal, Portal, Title, Provider, FAB } from 'react-native-paper';\r\nimport {StyleSheet, Text, View, Button, TextInput, ScrollView } from 'react-native';\r\nimport Icon from 'react-native-vector-icons/FontAwesome5';\r\nimport { Dimensions } from 'react-native';\r\nimport AsyncStorage from '@react-native-community/async-storage';\r\nimport ActivityCard from './ActivityCard';\r\nimport ActivityModal from './ActivityModal';\r\nimport AddActivity from './AddActivity';\r\nimport { useIsFocused } from '@react-navigation/native'\r\n// import { withNavigation, NavigationEvents } from 'react-navigation';\r\n\r\n\r\n\r\nclass MealView extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            name: \"\",\r\n            duration: 0.0,\r\n            date: \"\",\r\n            calories: 0.0,\r\n            mealArray: [],\r\n            accessToken: \"\",\r\n            username: \"\",\r\n            visible: false,\r\n          }\r\n\r\n    }\r\n\r\n    async getStoredData(key){\r\n        try{\r\n            let value = await AsyncStorage.getItem(key);\r\n            this.setState({[key]: value});\r\n         } catch (error) {\r\n            console.log(error);\r\n         }\r\n    }\r\n\r\n    deleteMeal(id){\r\n        fetch('https://mysqlcs639.cs.wisc.edu/meals/' + id, {\r\n          method: 'DELETE',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n            'x-access-token': this.state.accessToken\r\n          },\r\n        })\r\n          .then(res => res.json())\r\n          .then(res => {\r\n            alert(\"Mealhas been deleted!\");\r\n\r\n          })\r\n          .catch(err => {\r\n            alert(\"Something went wrong! \");\r\n          });\r\n          this.updateData();\r\n    \r\n    }\r\n\r\n    hideModal = () => this.setState({visible: false});\r\n    handleAddActivity(){\r\n        this.setState({visible: true});\r\n\r\n        // return(\r\n           \r\n        // )\r\n    }\r\n\r\n    getModal(){\r\n      if(this.state.visible){\r\n          return(\r\n              <AddActivity visible={this.state.visible} updateData = {() =>this.updateData() } hideModal={this.hideModal} accessToken={this.state.accessToken} />\r\n          )\r\n      }\r\n  }\r\n\r\n    updateData(){\r\n      let tempMeals = []\r\n        fetch('https://mysqlcs639.cs.wisc.edu/meals/', {\r\n          method: 'GET',\r\n          headers: { 'x-access-token': this.state.accessToken }\r\n        })\r\n          .then(res => res.json())\r\n          .then(res => {\r\n            console.log(res, \"res\")\r\n              // this.setState({mealArray:  res.meals});\r\n              tempMeals = res.meals\r\n               for(const meal of res.meals.values()){\r\n                  fetch('https://mysqlcs639.cs.wisc.edu/meals/' + meal.id + '/foods', {\r\n                        method: 'GET',\r\n                         headers: { 'x-access-token': this.state.accessToken }\r\n                     })\r\n                    .then(res2 => res2.json())\r\n                    .then(res2 => {\r\n                      \r\n                        for(const food of res2.foods.values()){\r\n                            todayProteins += food.protein;\r\n                            todayCarbo += food.carbohydrates;\r\n                            todayFats += food.fat;\r\n                            todayFoodCal = food.calories;\r\n                        }\r\n                      this.setState({dailyProtein: todayProteins})\r\n                      this.setState({dailyCarbo: todayCarbo})\r\n                      this.setState({dailyFats: todayFats})\r\n                      this.setState({dailyFoodCal: todayFoodCal})\r\n                    });\r\n                    }\r\n        \r\n                })\r\n          .catch(err =>{console.log(err)});\r\n    }\r\n\r\n    getMeals(){\r\n      // this.updateData();\r\n        let cardList = [];\r\n        // console.log(this.state.activityArray, \"activity\")\r\n        for (let i = 0; i < this.state.mealArray.length; i++){\r\n        // for(const key of this.state.activityArray.keys()){\r\n          let value = this.state.activityArray[i];\r\n          // console.log(value, \"activity info\")\r\n          // console.log(value.id, \"activity id\")\r\n          \r\n            cardList.push(<ActivityCard key={i} name={value.name} date={value.date}\r\n                           duration={value.duration} calories={value.calories}\r\n                           id={value.id} accessToken={this.state.accessToken}\r\n                           deleteExercise = {(id)=>this.deleteExercise(id)} \r\n                          updateData = {() =>this.updateData() }/>)\r\n\r\n        }\r\n        return cardList;\r\n    }\r\n    empty(){}\r\n\r\n    async componentDidMount() {\r\n        await this.getStoredData(\"accessToken\");\r\n        await this.getStoredData(\"username\");\r\n        \r\n        // console.log(this.state.accessToken)\r\n        this.updateData();\r\n      \r\n        this.navListener = this.props.navigation.addListener('didFocus', () => {\r\n          this.updateData();\r\n          \r\n       });\r\n    //   if(this.props.isFocused){\r\n    //     this.updateData();\r\n    //   // }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n \r\n      this.navListener();\r\n   }\r\n  \r\n\r\n    render() {\r\n      // const { isFocused } = this.props;\r\n        return (\r\n        <ScrollView style={styles.mainContainer} contentContainerStyle={{ flexGrow: 11, justifyContent: 'center', alignItems: \"center\" }}>\r\n            <View style={styles.space} />\r\n            <View style={{ flexDirection: 'row', flexWrap: 'wrap' }}>\r\n            <Icon name=\"walking\" size={40} color=\"#900\" style={{ marginRight: 20 }} />\r\n          <Text style={styles.bigText}>Exercises</Text>\r\n            </View>\r\n            <View style={styles.spaceSmall}></View>\r\n        <Text>Let's get to work!</Text>\r\n        <Text>Record your exercises below.</Text>\r\n        {/* <View style={styles.space} />\r\n        <Button color=\"#942a21\" style={styles.buttonInline} title=\"ADD ACTIVITY\" onPress={() => this.handleAddActivity()} />\r\n        <View style={styles.space} /> */}\r\n        <FAB\r\n               icon=\"plus\"\r\n               medium\r\n              //  size={35}\r\n               style={styles.fab}\r\n               onPress={() => this.handleAddActivity()}\r\n            />\r\n            {/* {this.getModal()} */}\r\n             {/* <ActivityModal visible={this.state.visible} hideModal={this.hideModal} accessToken={this.state.accessToken} addmode={true} editmode={false}/> */}\r\n        {/* <View>{isFocused? this.updateData(): this.empty()}</View> */}\r\n        \r\n        {/* <NavigationEvents\r\n              onWillFocus={() => {\r\n                this.updateData()\r\n              }}\r\n            /> */}\r\n            {/* <View>{this.getMeals()}</View> */}\r\n        </ScrollView>)\r\n    }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    scrollView: {\r\n        height: Dimensions.get('window').height\r\n      },\r\n      mainContainer: {\r\n        flex: 1\r\n      },\r\n      scrollViewContainer: {},\r\n      container: {\r\n        flex: 1,\r\n        backgroundColor: '#fff',\r\n      },\r\n      bigText: {\r\n        fontSize: 32,\r\n        fontWeight: \"700\",\r\n        marginBottom: 5\r\n      },\r\n      spaceSmall: {\r\n        width: 20,\r\n        height: 10,\r\n      },\r\n      space: {\r\n        width: 20,\r\n        height: 20,\r\n      },\r\n      buttonInline: {\r\n        display: \"flex\"\r\n      },\r\n\r\n      fab: {\r\n        alignSelf: 'flex-end',\r\n        position: 'absolute',\r\n        top: 55,\r\n        right: 15,\r\n        backgroundColor: '#900',\r\n     },\r\n      \r\n});\r\n\r\nexport default MealView;\r\n// export default withNavigation(ExercisesView);\r\n// export default function(props) {\r\n//   const isFocused = useIsFocused();\r\n\r\n//   return <ExercisesView {...props} isFocused={isFocused} />;\r\n// }"]},"metadata":{},"sourceType":"module"}