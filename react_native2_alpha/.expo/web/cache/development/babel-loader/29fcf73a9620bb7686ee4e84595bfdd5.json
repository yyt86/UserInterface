{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"F:\\\\course\\\\639-UI\\\\react_native2_alpha-yyt86-main\\\\ExercisesView.js\";\n\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } it = o[Symbol.iterator](); return it.next.bind(it); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport moment from \"moment\";\nimport { Modal, Portal, Title, Provider } from 'react-native-paper';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Icon from \"@expo/vector-icons/FontAwesome5\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport AsyncStorage from '@react-native-community/async-storage';\nimport ActivityCard from \"./ActivityCard\";\nimport ActivityModal from \"./ActivityModal\";\n\nvar ExercisesView = function (_React$Component) {\n  _inherits(ExercisesView, _React$Component);\n\n  var _super = _createSuper(ExercisesView);\n\n  function ExercisesView(props) {\n    var _this;\n\n    _classCallCheck(this, ExercisesView);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      name: \"\",\n      duration: 0.0,\n      date: \"\",\n      calories: 0.0,\n      activityArray: [],\n      accessToken: \"\",\n      username: \"\"\n    };\n    return _this;\n  }\n\n  _createClass(ExercisesView, [{\n    key: \"getStoredData\",\n    value: function getStoredData(key) {\n      var value;\n      return _regeneratorRuntime.async(function getStoredData$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem(key));\n\n            case 3:\n              value = _context.sent;\n              this.setState(_defineProperty({}, key, value));\n              _context.next = 10;\n              break;\n\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0);\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this, [[0, 7]], Promise);\n    }\n  }, {\n    key: \"deleteExercise\",\n    value: function deleteExercise(id) {\n      fetch('https://mysqlcs639.cs.wisc.edu/activities/' + id, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json',\n          'x-access-token': this.state.accessToken\n        }\n      }).then(function (res) {\n        return res.json();\n      }).then(function (res) {\n        alert(\"Exercise has been deleted!\");\n      }).catch(function (err) {\n        alert(\"Something went wrong! \");\n      });\n      this.getData();\n    }\n  }, {\n    key: \"handleAddActivity\",\n    value: function handleAddActivity() {\n      return React.createElement(ActivityModal, {\n        visible: this.state.visible,\n        id: this.props.id,\n        accessToken: this.state.accessToken,\n        addmode: true,\n        editmode: false,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 13\n        }\n      });\n    }\n  }, {\n    key: \"getData\",\n    value: function getData() {\n      var _this2 = this;\n\n      fetch('https://mysqlcs639.cs.wisc.edu/activities/', {\n        method: 'GET',\n        headers: {\n          'x-access-token': this.state.accessToken\n        }\n      }).then(function (res) {\n        return res.json();\n      }).then(function (res) {\n        _this2.setState({\n          activityArray: res\n        });\n\n        _this2.getExercises();\n      });\n    }\n  }, {\n    key: \"getExercises\",\n    value: function getExercises() {\n      var _this3 = this;\n\n      var cardList = [];\n\n      for (var _iterator = _createForOfIteratorHelperLoose(this.state.activityArray.entries()), _step; !(_step = _iterator()).done;) {\n        var _ref = _step.value;\n\n        var _ref2 = _slicedToArray(_ref, 2);\n\n        var key = _ref2[0];\n        var value = _ref2[1];\n        console.log(value, \"activity info\");\n        console.log(value.id, \"activity info\");\n        var currentDate = moment(value.date).format(\"MMMM D, YYYY\");\n        cardList.push(React.createElement(ActivityCard, {\n          key: key,\n          name: value.name,\n          date: currentDate,\n          duration: value.duration,\n          calories: value.calories,\n          id: value.id,\n          accessToken: this.state.accessToken,\n          deleteExercise: function deleteExercise(id) {\n            return _this3.deleteExercise(id);\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 27\n          }\n        }));\n      }\n\n      return cardList;\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      return _regeneratorRuntime.async(function componentDidMount$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _regeneratorRuntime.awrap(this.getStoredData(\"accessToken\"));\n\n            case 2:\n              _context2.next = 4;\n              return _regeneratorRuntime.awrap(this.getStoredData(\"username\"));\n\n            case 4:\n              console.log(this.state.accessToken);\n              this.getData();\n\n            case 6:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      return React.createElement(ScrollView, {\n        style: styles.mainContainer,\n        contentContainerStyle: {\n          flexGrow: 11,\n          justifyContent: 'center',\n          alignItems: \"center\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 9\n        }\n      }, React.createElement(View, {\n        style: styles.space,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 13\n        }\n      }), React.createElement(View, {\n        style: {\n          flexDirection: 'row',\n          flexWrap: 'wrap'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 13\n        }\n      }, React.createElement(Icon, {\n        name: \"walking\",\n        size: 40,\n        color: \"#900\",\n        style: {\n          marginRight: 20\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 13\n        }\n      }), React.createElement(Text, {\n        style: styles.bigText,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 11\n        }\n      }, \"Exercises\")), React.createElement(View, {\n        style: styles.spaceSmall,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 13\n        }\n      }), React.createElement(Text, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 9\n        }\n      }, \"Let's get to work!\"), React.createElement(Text, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 9\n        }\n      }, \"Record your exercises below.\"), React.createElement(View, {\n        style: styles.space,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 9\n        }\n      }), React.createElement(Button, {\n        color: \"#942a21\",\n        style: styles.buttonInline,\n        title: \"ADD ACTIVITY\",\n        onPress: function onPress() {\n          return _this4.handleAddActivity();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 9\n        }\n      }), React.createElement(View, {\n        style: styles.space,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 9\n        }\n      }), React.createElement(View, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 9\n        }\n      }, this.getExercises()));\n    }\n  }]);\n\n  return ExercisesView;\n}(React.Component);\n\nvar styles = StyleSheet.create({\n  scrollView: {\n    height: Dimensions.get('window').height\n  },\n  mainContainer: {\n    flex: 1\n  },\n  scrollViewContainer: {},\n  container: {\n    flex: 1,\n    backgroundColor: '#fff'\n  },\n  bigText: {\n    fontSize: 32,\n    fontWeight: \"700\",\n    marginBottom: 5\n  },\n  spaceSmall: {\n    width: 20,\n    height: 10\n  },\n  space: {\n    width: 20,\n    height: 20\n  },\n  buttonInline: {\n    display: \"flex\"\n  },\n  fab: {\n    position: 'absolute',\n    margin: 16,\n    right: 0,\n    bottom: 0\n  }\n});\nexport default ExercisesView;","map":{"version":3,"sources":["F:/course/639-UI/react_native2_alpha-yyt86-main/ExercisesView.js"],"names":["React","moment","Modal","Portal","Title","Provider","Icon","AsyncStorage","ActivityCard","ActivityModal","ExercisesView","props","state","name","duration","date","calories","activityArray","accessToken","username","key","getItem","value","setState","console","log","id","fetch","method","headers","then","res","json","alert","catch","err","getData","visible","getExercises","cardList","entries","currentDate","format","push","deleteExercise","getStoredData","styles","mainContainer","flexGrow","justifyContent","alignItems","space","flexDirection","flexWrap","marginRight","bigText","spaceSmall","buttonInline","handleAddActivity","Component","StyleSheet","create","scrollView","height","Dimensions","get","flex","scrollViewContainer","container","backgroundColor","fontSize","fontWeight","marginBottom","width","display","fab","position","margin","right","bottom"],"mappings":"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","sourcesContent":["import React from 'react';\nimport moment from \"moment\";\nimport { Modal, Portal, Title, Provider } from 'react-native-paper';\nimport {StyleSheet, Text, View, Button, TextInput, ScrollView } from 'react-native';\nimport Icon from 'react-native-vector-icons/FontAwesome5';\nimport { Dimensions } from 'react-native';\nimport AsyncStorage from '@react-native-community/async-storage';\nimport ActivityCard from './ActivityCard';\nimport ActivityModal from './ActivityModal';\n// class ExercisesView extends React.Component {\n//     constructor(props) {\n//         super(props);\n//         this.state = {\n            \n//         }\n\n//     }\n\n//     componentDidMount() {\n\n//     }\n\n//     render() {\n//         return <></>\n//     }\n// }\n\n// const styles = StyleSheet.create({\n    \n// });\n\n\nclass ExercisesView extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            name: \"\",\n            duration: 0.0,\n            date: \"\",\n            calories: 0.0,\n            activityArray: [],\n            accessToken: \"\",\n            username: \"\",\n          }\n\n    }\n\n    async getStoredData(key){\n        try{\n            let value = await AsyncStorage.getItem(key);\n            this.setState({[key]: value});\n         } catch (error) {\n            console.log(error);\n         }\n    }\n\n    deleteExercise(id){\n        fetch('https://mysqlcs639.cs.wisc.edu/activities/' + id, {\n          method: 'DELETE',\n          headers: {\n            'Content-Type': 'application/json',\n            'x-access-token': this.state.accessToken\n          },\n        })\n          .then(res => res.json())\n          .then(res => {\n            alert(\"Exercise has been deleted!\");\n\n          })\n          .catch(err => {\n            alert(\"Something went wrong! \");\n          });\n          this.getData();\n    \n    }\n\n    handleAddActivity(){\n        \n        return(\n            <ActivityModal visible={this.state.visible}  id={this.props.id} accessToken={this.state.accessToken} addmode={true} editmode={false}/>\n        )\n    }\n\n    getData(){\n        fetch('https://mysqlcs639.cs.wisc.edu/activities/', {\n          method: 'GET',\n          headers: { 'x-access-token': this.state.accessToken }\n        })\n          .then(res => res.json())\n          .then(res => {\n              this.setState({activityArray: res});\n            //   for(const [key, value] of Object.entries(res)){\n            //       this.setState({[key]: value})\n            //   }\n           this.getExercises();\n          });\n    }\n\n    getExercises(){\n        let cardList = [];\n        for(const [key, value] of this.state.activityArray.entries()){\n          console.log(value, \"activity info\")\n          console.log(value.id, \"activity info\")\n            let currentDate = moment(value.date).format(\"MMMM D, YYYY\");\n            cardList.push(<ActivityCard key={key} name={value.name} date={currentDate}\n                           duration={value.duration} calories={value.calories}\n                           id={value.id} accessToken={this.state.accessToken}\n                           deleteExercise = {(id)=>this.deleteExercise(id)} />)\n\n        }\n        return cardList;\n    }\n\n    async componentDidMount() {\n        await this.getStoredData(\"accessToken\");\n        await this.getStoredData(\"username\");\n        console.log(this.state.accessToken)\n        this.getData();\n    }\n\n    render() {\n        return (\n        <ScrollView style={styles.mainContainer} contentContainerStyle={{ flexGrow: 11, justifyContent: 'center', alignItems: \"center\" }}>\n            <View style={styles.space} />\n            <View style={{ flexDirection: 'row', flexWrap: 'wrap' }}>\n            <Icon name=\"walking\" size={40} color=\"#900\" style={{ marginRight: 20 }} />\n          <Text style={styles.bigText}>Exercises</Text>\n            </View>\n            <View style={styles.spaceSmall}></View>\n        <Text>Let's get to work!</Text>\n        <Text>Record your exercises below.</Text>\n        <View style={styles.space} />\n        <Button color=\"#942a21\" style={styles.buttonInline} title=\"ADD ACTIVITY\" onPress={() => this.handleAddActivity()} />\n        <View style={styles.space} />\n        <View>{this.getExercises()}</View>\n        </ScrollView>)\n    }\n}\n\nconst styles = StyleSheet.create({\n    scrollView: {\n        height: Dimensions.get('window').height\n      },\n      mainContainer: {\n        flex: 1\n      },\n      scrollViewContainer: {},\n      container: {\n        flex: 1,\n        backgroundColor: '#fff',\n      },\n      bigText: {\n        fontSize: 32,\n        fontWeight: \"700\",\n        marginBottom: 5\n      },\n      spaceSmall: {\n        width: 20,\n        height: 10,\n      },\n      space: {\n        width: 20,\n        height: 20,\n      },\n      buttonInline: {\n        display: \"flex\"\n      },\n      fab: {\n        position: 'absolute',\n        margin: 16,\n        right: 0,\n        bottom: 0,\n      },\n});\n\nexport default ExercisesView;"]},"metadata":{},"sourceType":"module"}