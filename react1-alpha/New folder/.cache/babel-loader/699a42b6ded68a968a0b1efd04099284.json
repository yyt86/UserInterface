{"ast":null,"code":"var _jsxFileName = \"F:\\\\course\\\\639-UI\\\\react1-alpha-yyt86-master\\\\src\\\\App.js\";\nimport React from 'react';\nimport './App.css';\nimport Tabs from 'react-bootstrap/Tabs';\nimport Tab from 'react-bootstrap/Tab';\nimport Sidebar from './Sidebar';\nimport CourseArea from './CourseArea';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.add = (course, sec_index, subsec_index) => {\n      let course_selected = {\n        // number: course.number,\n        // name: course.name,\n        // credits: course.credits,\n        // subject: course.subject,\n        // description: course.description,\n        // requisites: course.requisites,\n        // keywords: course.keywords,\n        secnum: [] // sections: []\n\n      };\n      console.log(\"cart\");\n      console.log(this.state.cart); // console.log(course_selected.secnum)\n\n      let newcart = Object.assign({}, this.state.cart);\n\n      if (sec_index == null) {\n        course_selected = course;\n        course_selected.secnum = course.sections.keys(); // newcart[course_selected.number] = course_selected\n      } else {\n        if (subsec_index === null) {\n          if (!newcart[course_selected.number]) {\n            // Object.assign(course_selected, {sections: {[sec_index]:course.sections[sec_index]}})\n            course_selected.sections.push(course.sections[sec_index]); // console.log(course_selected.sections)\n\n            course_selected.secnum.push(sec_index);\n            newcart[course_selected.number] = course_selected;\n            console.log(newcart[course_selected.number]); // newcart[course_selected.number] = course_selected\n            // console.log(newcart[course_selected.number])\n          } else {\n            console.log(newcart[course_selected.number].secnum);\n\n            if (newcart[course_selected.number].secnum.includes(sec_index)) {\n              let i = newcart[course_selected.number].secnum.indexOf(sec_index);\n              newcart[course_selected.number].sections[i] = course.sections[sec_index];\n            } else {\n              newcart[course_selected.number].sections.push(course.sections[sec_index]);\n              newcart[course_selected.number].secnum.push(sec_index);\n            } // course_selected.sections[sec_index] = course.sections[sec_index]\n            // newcart[course_selected.number] = course_selected\n\n          }\n        } else {\n          let newsec = {\n            number: course.sections[sec_index].number,\n            instructor: course.sections[sec_index].instructor,\n            location: course.sections[sec_index].location,\n            time: course.sections[sec_index].time,\n            // subsecnum: [],\n            subsections: [course.sections[sec_index].subsections[subsec_index]]\n          };\n\n          if (!newcart[course_selected.number]) {\n            course_selected.sections.push(newsec);\n            course_selected.secnum.push(sec_index);\n            newcart[course_selected.number] = course_selected; // newcart[course_selected.number] = course_selected\n          } else {\n            if (!newcart[course_selected.number].secnum.includes(sec_index)) {\n              newcart[course_selected.number].sections.push(newsec);\n              newcart[course_selected.number].push(sec_index);\n            } else {\n              let i = newcart[course_selected.number].secnum.indexOf(sec_index);\n\n              if (!newcart[course_selected.number].sections[i].subsections.include(course.sections[sec_index].subsections[subsec_index])) {\n                newcart[course_selected.number].sections[i].subsections.push(course.sections[sec_index].subsections[subsec_index]);\n              }\n            }\n          }\n        }\n      } // course_selected.sections.subsections = Object.values(course_selected.sections.subsections)\n      // course_selected.sections = Object.values(course_selected.sections)\n      // course_selected.sections = course_selected.sections.map( (item) => (item.subsections = Object.values(item.subsections)))\n\n\n      newcart[course_selected.number] = course_selected;\n      console.log(\"newcart\");\n      console.log(newcart);\n      this.setState({\n        cart: newcart\n      });\n    };\n\n    this.remove = (course, sec_index, subsec_index) => {\n      let newcart = Object.assign({}, this.state.cart);\n\n      if (sec_index == null) {\n        delete newcart[course.number];\n      } else {\n        if (subsec_index === null) {\n          let i = newcart[course.number].secnum.indexOf(sec_index);\n          delete newcart[course.number].sections[i];\n\n          if (newcart[course.number].sections == null) {\n            delete newcart[course.number];\n          }\n        } else {\n          let i = newcart[course.number].secnum.indexOf(sec_index);\n          let j = newcart[course.number].sections[i].subsections.indexOf(course.sections[sec_index].subsections[subsec_index]);\n          delete newcart[course.number].sections[i].subsections[j];\n\n          if (newcart[course.number].sections[i].subsections == null) {\n            delete newcart[course.number].sections[i];\n          }\n\n          if (newcart[course.number].sections == null) {\n            delete newcart[course.number];\n          }\n        }\n      }\n\n      this.setState({\n        cart: newcart\n      });\n    };\n\n    this.state = {\n      allCourses: {},\n      filteredCourses: {},\n      subjects: [],\n      cart: {}\n    }; // this.add = this.add.bind(this);\n  }\n\n  componentDidMount() {\n    fetch('http://mysqlcs639.cs.wisc.edu:53706/api/react/classes').then(res => res.json()).then(data => this.setState({\n      allCourses: data,\n      filteredCourses: data,\n      subjects: this.getSubjects(data)\n    }));\n  }\n\n  getSubjects(data) {\n    let subjects = [];\n    subjects.push(\"All\");\n\n    for (const course of Object.values(data)) {\n      if (subjects.indexOf(course.subject) === -1) subjects.push(course.subject);\n    }\n\n    return subjects;\n  }\n\n  setCourses(courses) {\n    this.setState({\n      filteredCourses: courses\n    });\n  } // setaddedcourse(this.state.cart){\n  //   this.setState({addedcourses})\n  // }\n\n\n  // setCartdata = (newcart) => {\n  //   let Cartdata = Object.assign({}, newcart)\n  //   for (const [key, value] in Object.entries(Cartdata)){\n  //       value.sections = Object.values( value.sections)\n  //       for (const [k, v] in value.sections.entries(value)){\n  //         if(v.subsections != null){\n  //           v.subsections = Object.values( v.subsections)}\n  //         }\n  //       }\n  //   console.log(Cartdata)\n  //   return Cartdata\n  //   }\n  render() {\n    // console.log(Object.values(this.state.cart))\n    // console.log(Object.keys(this.state.filteredCourses))\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"link\", {\n      rel: \"stylesheet\",\n      href: \"https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css\",\n      integrity: \"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T\",\n      crossOrigin: \"anonymous\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Tabs, {\n      defaultActiveKey: \"search\",\n      style: {\n        position: 'fixed',\n        zIndex: 1,\n        width: '100%',\n        backgroundColor: 'white'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Tab, {\n      eventKey: \"search\",\n      title: \"Search\",\n      style: {\n        paddingTop: '5vh'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Sidebar, {\n      setCourses: courses => this.setCourses(courses),\n      courses: this.state.allCourses,\n      subjects: this.state.subjects,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        marginLeft: '20vw'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(CourseArea, {\n      data: this.state.filteredCourses,\n      allData: this.state.allCourses,\n      cartMode: false,\n      onaddtocart: this.add,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 15\n      }\n    }))), /*#__PURE__*/React.createElement(Tab, {\n      eventKey: \"cart\",\n      title: \"Cart\",\n      style: {\n        paddingTop: '5vh'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        marginLeft: '5vw'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(CourseArea, {\n      data: Object.values(this.state.cart),\n      allData: this.state.allCourses,\n      cartMode: true,\n      onaddtocart: this.add,\n      onremovecart: this.remove,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 13\n      }\n    })))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["F:/course/639-UI/react1-alpha-yyt86-master/src/App.js"],"names":["React","Tabs","Tab","Sidebar","CourseArea","App","Component","constructor","props","add","course","sec_index","subsec_index","course_selected","secnum","console","log","state","cart","newcart","Object","assign","sections","keys","number","push","includes","i","indexOf","newsec","instructor","location","time","subsections","include","setState","remove","j","allCourses","filteredCourses","subjects","componentDidMount","fetch","then","res","json","data","getSubjects","values","subject","setCourses","courses","render","position","zIndex","width","backgroundColor","paddingTop","marginLeft"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './App.css';\nimport Tabs from 'react-bootstrap/Tabs'\nimport Tab from 'react-bootstrap/Tab'\nimport Sidebar from './Sidebar';\nimport CourseArea from './CourseArea';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      allCourses: {},\n      filteredCourses: {},\n      subjects: [],\n      cart:{}\n\n    };\n\n    // this.add = this.add.bind(this);\n  }\n\n  componentDidMount() {\n    fetch('http://mysqlcs639.cs.wisc.edu:53706/api/react/classes').then(\n      res => res.json()\n    ).then(data => this.setState({allCourses: data, filteredCourses: data, subjects: this.getSubjects(data)}));\n  }\n\n  getSubjects(data) {\n    let subjects = [];\n    subjects.push(\"All\");\n\n    for(const course of Object.values(data)) {\n      if(subjects.indexOf(course.subject) === -1)\n        subjects.push(course.subject);\n    }\n\n    return subjects;\n  }\n\n  setCourses(courses) {\n    this.setState({filteredCourses: courses})\n  }\n \n  // setaddedcourse(this.state.cart){\n  //   this.setState({addedcourses})\n  // }\n  \n  add = (course, sec_index, subsec_index) => {\n    \n    let course_selected = {\n        // number: course.number,\n        // name: course.name,\n        // credits: course.credits,\n        // subject: course.subject,\n        // description: course.description,\n        // requisites: course.requisites,\n        // keywords: course.keywords,\n        secnum: [],\n        // sections: []\n      }\n\n      console.log(\"cart\")\n      console.log(this.state.cart)\n      // console.log(course_selected.secnum)\n      let newcart = Object.assign({}, this.state.cart)\n      \n      if(sec_index == null){\n        course_selected = course;\n        course_selected.secnum = course.sections.keys()\n        // newcart[course_selected.number] = course_selected\n      }\n      else{\n        if(subsec_index === null){\n          if(!newcart[course_selected.number]){\n            // Object.assign(course_selected, {sections: {[sec_index]:course.sections[sec_index]}})\n\n            course_selected.sections.push(course.sections[sec_index])\n            // console.log(course_selected.sections)\n            course_selected.secnum.push(sec_index)\n            newcart[course_selected.number] = course_selected\n            console.log(newcart[course_selected.number])\n            // newcart[course_selected.number] = course_selected\n            // console.log(newcart[course_selected.number])\n          }\n          else{\n            console.log(newcart[course_selected.number].secnum)\n            if(newcart[course_selected.number].secnum.includes(sec_index)){\n              let i  = newcart[course_selected.number].secnum.indexOf(sec_index)\n              newcart[course_selected.number].sections[i] = course.sections[sec_index]\n            }\n\n            else{\n              newcart[course_selected.number].sections.push(course.sections[sec_index])\n              newcart[course_selected.number].secnum.push(sec_index)\n            }\n            // course_selected.sections[sec_index] = course.sections[sec_index]\n            // newcart[course_selected.number] = course_selected\n          }\n        }\n  \n        else{\n          let newsec = {\n            number: course.sections[sec_index].number,\n            instructor: course.sections[sec_index].instructor,\n            location: course.sections[sec_index].location,\n            time: course.sections[sec_index].time,\n            // subsecnum: [],\n            subsections: [course.sections[sec_index].subsections[subsec_index]]\n          }\n          if(!newcart[course_selected.number]){\n            course_selected.sections.push(newsec)\n              course_selected.secnum.push(sec_index)\n              newcart[course_selected.number] = course_selected\n            // newcart[course_selected.number] = course_selected\n          }\n          else{\n            \n            if(!newcart[course_selected.number].secnum.includes(sec_index)){\n              newcart[course_selected.number].sections.push(newsec)\n              newcart[course_selected.number].push(sec_index)\n            }\n            else{\n              let i  = newcart[course_selected.number].secnum.indexOf(sec_index)\n              if(!newcart[course_selected.number].sections[i].subsections.include(course.sections[sec_index].subsections[subsec_index])){\n                newcart[course_selected.number].sections[i].subsections.push(course.sections[sec_index].subsections[subsec_index])\n              }\n               \n            }\n          }\n        }  \n        \n      }\n\n      // course_selected.sections.subsections = Object.values(course_selected.sections.subsections)\n      // course_selected.sections = Object.values(course_selected.sections)\n      // course_selected.sections = course_selected.sections.map( (item) => (item.subsections = Object.values(item.subsections)))\n      newcart[course_selected.number] = course_selected\n      console.log(\"newcart\")\n      console.log(newcart)\n      this.setState({cart: newcart})\n      \n  } \n\n  remove = (course, sec_index, subsec_index) => {\n    let newcart = Object.assign({}, this.state.cart)\n      \n      if(sec_index == null){\n        delete newcart[course.number]\n      }\n      else{\n        if(subsec_index === null){\n          let i  = newcart[course.number].secnum.indexOf(sec_index) \n          delete newcart[course.number].sections[i]\n        \n          if(newcart[course.number].sections == null){\n            delete newcart[course.number]\n          }\n        }\n        else{\n          let i  = newcart[course.number].secnum.indexOf(sec_index) \n          let j = newcart[course.number].sections[i].subsections.indexOf(course.sections[sec_index].subsections[subsec_index])\n          delete newcart[course.number].sections[i].subsections[j]\n\n          if(newcart[course.number].sections[i].subsections == null){\n            delete newcart[course.number].sections[i]\n          }\n\n          if(newcart[course.number].sections == null){\n            delete newcart[course.number]\n          }\n        }\n      }\n\n      this.setState({cart: newcart})\n  }\n\n  // setCartdata = (newcart) => {\n  //   let Cartdata = Object.assign({}, newcart)\n  //   for (const [key, value] in Object.entries(Cartdata)){\n  //       value.sections = Object.values( value.sections)\n  //       for (const [k, v] in value.sections.entries(value)){\n  //         if(v.subsections != null){\n  //           v.subsections = Object.values( v.subsections)}\n  //         }\n  //       }\n\n  //   console.log(Cartdata)\n  //   return Cartdata\n  //   }\n\n  \n  render() {\n    // console.log(Object.values(this.state.cart))\n    // console.log(Object.keys(this.state.filteredCourses))\n    return (\n      <>\n        <link\n          rel=\"stylesheet\"\n          href=\"https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css\"\n          integrity=\"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T\"\n          crossOrigin=\"anonymous\"\n        />\n\n\n\n        <Tabs defaultActiveKey=\"search\" style={{position: 'fixed', zIndex: 1, width: '100%', backgroundColor: 'white'}}>\n          <Tab eventKey=\"search\" title=\"Search\" style={{paddingTop: '5vh'}}>\n            <Sidebar setCourses={(courses) => this.setCourses(courses)} courses={this.state.allCourses} subjects={this.state.subjects}/>\n            <div style={{marginLeft: '20vw'}}>\n              <CourseArea data={this.state.filteredCourses} allData={this.state.allCourses} cartMode={false} onaddtocart={this.add}/>\n          </div>\n          </Tab>\n            \n          <Tab eventKey=\"cart\" title=\"Cart\" style={{paddingTop: '5vh'}}>\n            <div style={{marginLeft: '5vw'}}>\n            <CourseArea data={Object.values(this.state.cart)} allData={this.state.allCourses} cartMode={true} onaddtocart={this.add} onremovecart = {this.remove}/>\n            {/* <CourseArea data={(cartdatas) => this.setCartdata(cartdatas)} cartdatas = {this.state.cart} allData={this.state.allCourses} cartMode={true} onaddtocart={this.add} onremovecart = {this.remove}/> */}\n            </div>\n          </Tab>\n        </Tabs> \n      </>\n    )\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}