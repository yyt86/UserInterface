{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"F:\\\\course\\\\639-UI\\\\react_native2_alpha-yyt86-main\\\\ExercisesView.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport moment from \"moment\";\nimport { Modal, Portal, Title, Provider, FAB } from 'react-native-paper';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Icon from \"@expo/vector-icons/FontAwesome5\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport AsyncStorage from '@react-native-community/async-storage';\nimport ActivityCard from \"./ActivityCard\";\nimport ActivityModal from \"./ActivityModal\";\n\nvar ExercisesView = function (_React$Component) {\n  _inherits(ExercisesView, _React$Component);\n\n  var _super = _createSuper(ExercisesView);\n\n  function ExercisesView(props) {\n    var _this;\n\n    _classCallCheck(this, ExercisesView);\n\n    _this = _super.call(this, props);\n\n    _this.hideModal = function () {\n      return _this.setState({\n        visible: false\n      });\n    };\n\n    _this.state = {\n      name: \"\",\n      duration: 0.0,\n      date: \"\",\n      calories: 0.0,\n      activityArray: [],\n      accessToken: \"\",\n      username: \"\",\n      visible: false\n    };\n    return _this;\n  }\n\n  _createClass(ExercisesView, [{\n    key: \"getStoredData\",\n    value: function getStoredData(key) {\n      var value;\n      return _regeneratorRuntime.async(function getStoredData$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem(key));\n\n            case 3:\n              value = _context.sent;\n              this.setState(_defineProperty({}, key, value));\n              _context.next = 10;\n              break;\n\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0);\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this, [[0, 7]], Promise);\n    }\n  }, {\n    key: \"deleteExercise\",\n    value: function deleteExercise(id) {\n      fetch('https://mysqlcs639.cs.wisc.edu/activities/' + id, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json',\n          'x-access-token': this.state.accessToken\n        }\n      }).then(function (res) {\n        return res.json();\n      }).then(function (res) {\n        alert(\"Exercise has been deleted!\");\n      }).catch(function (err) {\n        alert(\"Something went wrong! \");\n      });\n      this.updateData();\n    }\n  }, {\n    key: \"handleAddActivity\",\n    value: function handleAddActivity() {\n      this.setState({\n        visible: true\n      });\n    }\n  }, {\n    key: \"getModal\",\n    value: function getModal() {\n      if (this.state.visible) {\n        return React.createElement(ActivityModal, {\n          visible: this.state.visible,\n          hideModal: this.hideModal,\n          accessToken: this.props.accessToken,\n          addmode: true,\n          editmode: false,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 15\n          }\n        });\n      }\n    }\n  }, {\n    key: \"updateData\",\n    value: function updateData() {\n      var _this2 = this;\n\n      fetch('https://mysqlcs639.cs.wisc.edu/activities/', {\n        method: 'GET',\n        headers: {\n          'x-access-token': this.state.accessToken\n        }\n      }).then(function (res) {\n        return res.json();\n      }).then(function (res) {\n        _this2.setState({\n          activityArray: res.activities\n        });\n\n        _this2.getExercises();\n      });\n    }\n  }, {\n    key: \"getExercises\",\n    value: function getExercises() {\n      var _this3 = this;\n\n      var cardList = [];\n\n      for (var i = 0; i < this.state.activityArray.length; i++) {\n        var value = this.state.activityArray[i];\n        var currentDate = moment(value.date).format('MMMM Do YYYY, h:mm:ss a');\n        cardList.push(React.createElement(ActivityCard, {\n          key: i,\n          name: value.name,\n          date: currentDate,\n          duration: value.duration,\n          calories: value.calories,\n          id: value.id,\n          accessToken: this.state.accessToken,\n          deleteExercise: function deleteExercise(id) {\n            return _this3.deleteExercise(id);\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 27\n          }\n        }));\n      }\n\n      return cardList;\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this4 = this;\n\n      return _regeneratorRuntime.async(function componentDidMount$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _regeneratorRuntime.awrap(this.getStoredData(\"accessToken\"));\n\n            case 2:\n              _context2.next = 4;\n              return _regeneratorRuntime.awrap(this.getStoredData(\"username\"));\n\n            case 4:\n              this.updateData();\n              this.navListener = this.props.navigation.addListener('didFocus', function () {\n                _this4.updateData();\n              });\n\n            case 6:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.navListener;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      return React.createElement(ScrollView, {\n        style: styles.mainContainer,\n        contentContainerStyle: {\n          flexGrow: 11,\n          justifyContent: 'center',\n          alignItems: \"center\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 9\n        }\n      }, React.createElement(View, {\n        style: styles.space,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 13\n        }\n      }), React.createElement(View, {\n        style: {\n          flexDirection: 'row',\n          flexWrap: 'wrap'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 13\n        }\n      }, React.createElement(Icon, {\n        name: \"walking\",\n        size: 40,\n        color: \"#900\",\n        style: {\n          marginRight: 20\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 13\n        }\n      }), React.createElement(Text, {\n        style: styles.bigText,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 11\n        }\n      }, \"Exercises\")), React.createElement(View, {\n        style: styles.spaceSmall,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 13\n        }\n      }), React.createElement(Text, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 9\n        }\n      }, \"Let's get to work!\"), React.createElement(Text, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 9\n        }\n      }, \"Record your exercises below.\"), React.createElement(FAB, {\n        icon: \"plus\",\n        medium: true,\n        style: styles.fab,\n        onPress: function onPress() {\n          return _this5.handleAddActivity();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 9\n        }\n      }), this.getModal(), React.createElement(View, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 9\n        }\n      }, this.getExercises()));\n    }\n  }]);\n\n  return ExercisesView;\n}(React.Component);\n\nvar styles = StyleSheet.create({\n  scrollView: {\n    height: Dimensions.get('window').height\n  },\n  mainContainer: {\n    flex: 1\n  },\n  scrollViewContainer: {},\n  container: {\n    flex: 1,\n    backgroundColor: '#fff'\n  },\n  bigText: {\n    fontSize: 32,\n    fontWeight: \"700\",\n    marginBottom: 5\n  },\n  spaceSmall: {\n    width: 20,\n    height: 10\n  },\n  space: {\n    width: 20,\n    height: 20\n  },\n  buttonInline: {\n    display: \"flex\"\n  },\n  fab: {\n    alignSelf: 'flex-end',\n    position: 'absolute',\n    top: 55,\n    right: 15,\n    backgroundColor: '#900'\n  }\n});\nexport default ExercisesView;","map":{"version":3,"sources":["F:/course/639-UI/react_native2_alpha-yyt86-main/ExercisesView.js"],"names":["React","moment","Modal","Portal","Title","Provider","FAB","Icon","AsyncStorage","ActivityCard","ActivityModal","ExercisesView","props","hideModal","setState","visible","state","name","duration","date","calories","activityArray","accessToken","username","key","getItem","value","console","log","id","fetch","method","headers","then","res","json","alert","catch","err","updateData","activities","getExercises","cardList","i","length","currentDate","format","push","deleteExercise","getStoredData","navListener","navigation","addListener","styles","mainContainer","flexGrow","justifyContent","alignItems","space","flexDirection","flexWrap","marginRight","bigText","spaceSmall","fab","handleAddActivity","getModal","Component","StyleSheet","create","scrollView","height","Dimensions","get","flex","scrollViewContainer","container","backgroundColor","fontSize","fontWeight","marginBottom","width","buttonInline","display","alignSelf","position","top","right"],"mappings":"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","sourcesContent":["import React from 'react';\nimport moment from \"moment\";\nimport { Modal, Portal, Title, Provider, FAB } from 'react-native-paper';\nimport {StyleSheet, Text, View, Button, TextInput, ScrollView } from 'react-native';\nimport Icon from 'react-native-vector-icons/FontAwesome5';\nimport { Dimensions } from 'react-native';\nimport AsyncStorage from '@react-native-community/async-storage';\nimport ActivityCard from './ActivityCard';\nimport ActivityModal from './ActivityModal';\n// class ExercisesView extends React.Component {\n//     constructor(props) {\n//         super(props);\n//         this.state = {\n            \n//         }\n\n//     }\n\n//     componentDidMount() {\n\n//     }\n\n//     render() {\n//         return <></>\n//     }\n// }\n\n// const styles = StyleSheet.create({\n    \n// });\n\n\nclass ExercisesView extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            name: \"\",\n            duration: 0.0,\n            date: \"\",\n            calories: 0.0,\n            activityArray: [],\n            accessToken: \"\",\n            username: \"\",\n            visible: false,\n          }\n\n    }\n\n    async getStoredData(key){\n        try{\n            let value = await AsyncStorage.getItem(key);\n            this.setState({[key]: value});\n         } catch (error) {\n            console.log(error);\n         }\n    }\n\n    deleteExercise(id){\n        fetch('https://mysqlcs639.cs.wisc.edu/activities/' + id, {\n          method: 'DELETE',\n          headers: {\n            'Content-Type': 'application/json',\n            'x-access-token': this.state.accessToken\n          },\n        })\n          .then(res => res.json())\n          .then(res => {\n            alert(\"Exercise has been deleted!\");\n\n          })\n          .catch(err => {\n            alert(\"Something went wrong! \");\n          });\n          this.updateData();\n    \n    }\n\n    hideModal = () => this.setState({visible: false});\n    handleAddActivity(){\n        this.setState({visible: true});\n\n        // return(\n           \n        // )\n    }\n\n    getModal(){\n      if(this.state.visible){\n          return(\n              <ActivityModal visible={this.state.visible}  hideModal={this.hideModal} accessToken={this.props.accessToken} addmode={true} editmode={false}/>\n          )\n      }\n  }\n\n    updateData(){\n        fetch('https://mysqlcs639.cs.wisc.edu/activities/', {\n          method: 'GET',\n          headers: { 'x-access-token': this.state.accessToken }\n        })\n          .then(res => res.json())\n          .then(res => {\n            // console.log(res, \"res\")\n              this.setState({activityArray:  res.activities});\n            //   for(const [key, value] of Object.entries(res)){\n            //       this.setState({[key]: value})\n            //   }\n           this.getExercises();\n          });\n    }\n\n    getExercises(){\n        let cardList = [];\n        // console.log(this.state.activityArray, \"activity\")\n        for (let i = 0; i < this.state.activityArray.length; i++){\n        // for(const key of this.state.activityArray.keys()){\n          let value = this.state.activityArray[i];\n          // console.log(value, \"activity info\")\n          // console.log(value.id, \"activity id\")\n            let currentDate = moment(value.date).format('MMMM Do YYYY, h:mm:ss a');\n            cardList.push(<ActivityCard key={i} name={value.name} date={currentDate}\n                           duration={value.duration} calories={value.calories}\n                           id={value.id} accessToken={this.state.accessToken}\n                           deleteExercise = {(id)=>this.deleteExercise(id)} \n                          />)\n\n        }\n        return cardList;\n    }\n\n    async componentDidMount() {\n        await this.getStoredData(\"accessToken\");\n        await this.getStoredData(\"username\");\n        // console.log(this.state.accessToken)\n        this.updateData();\n        this.navListener = this.props.navigation.addListener('didFocus', () => {\n          this.updateData();\n          \n       });\n    }\n\n    componentWillUnmount() {\n \n      this.navListener;\n   }\n\n    render() {\n        return (\n        <ScrollView style={styles.mainContainer} contentContainerStyle={{ flexGrow: 11, justifyContent: 'center', alignItems: \"center\" }}>\n            <View style={styles.space} />\n            <View style={{ flexDirection: 'row', flexWrap: 'wrap' }}>\n            <Icon name=\"walking\" size={40} color=\"#900\" style={{ marginRight: 20 }} />\n          <Text style={styles.bigText}>Exercises</Text>\n            </View>\n            <View style={styles.spaceSmall}></View>\n        <Text>Let's get to work!</Text>\n        <Text>Record your exercises below.</Text>\n        {/* <View style={styles.space} />\n        <Button color=\"#942a21\" style={styles.buttonInline} title=\"ADD ACTIVITY\" onPress={() => this.handleAddActivity()} />\n        <View style={styles.space} /> */}\n        <FAB\n               icon=\"plus\"\n               medium\n              //  size={35}\n               style={styles.fab}\n               onPress={() => this.handleAddActivity()}\n            />\n            {this.getModal()}\n             {/* <ActivityModal visible={this.state.visible} hideModal={this.hideModal} accessToken={this.state.accessToken} addmode={true} editmode={false}/> */}\n        <View>{this.getExercises()}</View>\n        </ScrollView>)\n    }\n}\n\nconst styles = StyleSheet.create({\n    scrollView: {\n        height: Dimensions.get('window').height\n      },\n      mainContainer: {\n        flex: 1\n      },\n      scrollViewContainer: {},\n      container: {\n        flex: 1,\n        backgroundColor: '#fff',\n      },\n      bigText: {\n        fontSize: 32,\n        fontWeight: \"700\",\n        marginBottom: 5\n      },\n      spaceSmall: {\n        width: 20,\n        height: 10,\n      },\n      space: {\n        width: 20,\n        height: 20,\n      },\n      buttonInline: {\n        display: \"flex\"\n      },\n\n      fab: {\n        alignSelf: 'flex-end',\n        position: 'absolute',\n        top: 55,\n        right: 15,\n        backgroundColor: '#900',\n     },\n      \n});\n\nexport default ExercisesView;"]},"metadata":{},"sourceType":"module"}